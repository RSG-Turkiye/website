---
import { Icon } from "astro-icon/components";

interface Member {
  name: string;
  role: string;
  image: string;
  institution: string;
  email?: string;
  socialMedia?: { platform: string; url: string }[];
}

const { name, description, members = [] } = Astro.props as { name: string; description: string; members: Member[] };

// Map social media platforms to their respective Font Awesome icons
const socialMediaIcons: Record<string, string> = {
  twitter: "fa-brands:twitter",
  linkedin: "fa-brands:linkedin",
  facebook: "fa-brands:facebook",
  github: "fa-brands:github",
  instagram: "fa-brands:instagram",
};
---
<div class="committee-card p-4">
  <h3 class="text-center mb-3">{name}</h3>
  <p class="text-center mb-4">{description}</p>
  <div class="row g-3">
    {members.map((member) => (
      <div class="col-md-6 col-lg-4">
        <div class="member-card text-center p-3">
          <div class="member-image-container mb-3">
            <img
              src={member.image}
              alt={member.name}
              class="member-image"
              width="150"
              height="150"
            />
          </div>
          <h5 class="mb-2">{member.name}</h5>
          <p class="text-muted mb-1">{member.role}</p>
          <p class="text-muted small mb-2">{member.institution}</p>
          {member.email && (
            <p class="text-muted small mb-2">
              <a href={`mailto:${member.email}`} class="text-decoration-none">
                <i class="fas fa-envelope me-1"></i>{member.email}
              </a>
            </p>
          )}
          {member.socialMedia && (
            <div class="social-links">
              {member.socialMedia.map((social) => (
                <a href={social.url} target="_blank" rel="noopener noreferrer" class="me-2">
                  <Icon name={socialMediaIcons[social.platform] || "fa-solid:question-circle"} class="social-icon" />
                </a>
              ))}
            </div>
          )}
        </div>
      </div>
    ))}
  </div>
</div>

<style>
  .committee-card {
    background: var(--bg-elevated);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    transition: all var(--transition-normal);
  }
  
  .committee-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }
  
  .committee-card h3 {
    color: var(--text-primary);
  }
  
  .committee-card p {
    color: var(--text-secondary);
  }
  
  .member-card {
    background: var(--bg-elevated);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    transition: all var(--transition-normal);
    height: 100%;
  }
  
  .member-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
  }
  
  .member-image-container {
    width: 150px;
    height: 150px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    box-shadow: var(--shadow-md);
    transition: all var(--transition-normal);
  }

  .member-image-container:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-lg);
  }

  .member-image {
    max-width: 120px;
    max-height: 120px;
    object-fit: contain;
    border-radius: 50%;
  }
  
  .member-card h5 {
    color: var(--text-primary);
    font-size: 1.1rem;
    font-weight: 600;
  }
  
  .member-card p {
    color: var(--text-secondary);
    font-size: 0.9rem;
  }
  
  .social-links a {
    display: inline-block;
    margin-right: 8px;
    font-size: 1.2rem;
    color: var(--text-secondary);
    transition: all var(--transition-normal);
  }
  
  .social-links a:hover {
    color: var(--primary-600);
    transform: translateY(-2px);
  }

  /* Light theme adjustments for member images */
  [data-theme="light"] .member-image-container {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  }

  [data-theme="light"] .member-image-container:hover {
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
  }
</style>
