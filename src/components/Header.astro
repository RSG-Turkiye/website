---
import ThemeIcon from './ThemeIcon.astro';
import LanguageIcon from './LanguageIcon.astro';
import { getLangFromUrl, useTranslations } from '../i18n/ui';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---
<header class="navbar navbar-expand-lg fixed-top">
      <div class="container d-flex align-items-center justify-content-between">
    <!-- Logo -->
          <a class="navbar-brand d-flex align-items-center" href="/">
        <div class="logo-container me-3">
          <img src="/logo/rsgturkey_logo.png" alt="RSG Turkey Logo" height="40" class="logo-image" />
        </div>
        <span class="fs-4 fw-bold">{t('hero.title')}</span>
      </a>

    <!-- Navigation -->
    <nav class="d-none d-lg-flex">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href={lang === 'tr' ? '/tr' : '/'}>{t('nav.home')}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href={lang === 'tr' ? '/tr/about' : '/about'}>{t('nav.about')}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href={lang === 'tr' ? '/tr/blog' : '/blog'}>{t('nav.blog')}</a>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="/webinars"
            id="webinarDropdown"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            {t('nav.webinars')}
          </a>
          <ul class="dropdown-menu" aria-labelledby="webinarDropdown">
            <li><a class="dropdown-item" href={lang === 'tr' ? '/tr/webinars#2025' : '/webinars#2025'}>2025 Webinars</a></li>
            <li><a class="dropdown-item" href={lang === 'tr' ? '/tr/webinars#2024' : '/webinars#2024'}>2024 Webinars</a></li>
            <li><a class="dropdown-item" href={lang === 'tr' ? '/tr/webinars#2023' : '/webinars#2023'}>2023 Webinars</a></li>
            <li><a class="dropdown-item" href={lang === 'tr' ? '/tr/webinars#2022' : '/webinars#2022'}>2022 Webinars</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href={lang === 'tr' ? '/tr/webinars#student' : '/webinars#student'}>Student Webinars</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="/events"
            id="eventDropdown"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            {t('nav.events')}
          </a>
          <ul class="dropdown-menu" aria-labelledby="eventDropdown">
            <li><a class="dropdown-item" href={lang === 'tr' ? '/tr/events#symposiums' : '/events#symposiums'}>Symposiums</a></li>
            <li><a class="dropdown-item" href={lang === 'tr' ? '/tr/events#workshops' : '/events#workshops'}>Workshops</a></li>
            <li><a class="dropdown-item" href={lang === 'tr' ? '/tr/events#upcoming' : '/events#upcoming'}>Upcoming Events</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link" href={lang === 'tr' ? '/tr/resources' : '/resources'}>{t('nav.resources')}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href={lang === 'tr' ? '/tr/contact' : '/contact'}>{t('nav.contact')}</a>
        </li>
      </ul>
    </nav>
    <!-- Call-to-Action Button -->
    <a href={lang === 'tr' ? '/tr/join' : '/join'} class="btn btn-primary btn-sm d-none d-lg-inline-block me-3">{t('nav.join')}</a>

    <!-- Theme Toggle -->
    <ThemeIcon />
    
    <!-- Language Toggle -->
    <LanguageIcon />

    <!-- Hamburger Menu for Mobile -->
    <button
      class="navbar-toggler d-lg-none"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#mobileMenu"
      aria-controls="mobileMenu"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div class="collapse" id="mobileMenu">
    <ul class="navbar-nav text-center py-3">
      <li class="nav-item">
        <a class="nav-link" href={lang === 'tr' ? '/tr' : '/'}>{t('nav.home')}</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={lang === 'tr' ? '/tr/about' : '/about'}>{t('nav.about')}</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={lang === 'tr' ? '/tr/blog' : '/blog'}>{t('nav.blog')}</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={lang === 'tr' ? '/tr/webinars' : '/webinars'}>{t('nav.webinars')}</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={lang === 'tr' ? '/tr/events' : '/events'}>{t('nav.events')}</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={lang === 'tr' ? '/tr/resources' : '/resources'}>{t('nav.resources')}</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={lang === 'tr' ? '/tr/contact' : '/contact'}>{t('nav.contact')}</a>
      </li>
      <li class="nav-item">
        <a class="btn btn-primary btn-sm" href={lang === 'tr' ? '/tr/join' : '/join'}>{t('nav.join')}</a>
      </li>
    </ul>
  </div>
  
</header>

<style>
  .logo-container {
    width: 50px;
    height: 50px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all var(--transition-normal);
  }

  .logo-container:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .logo-image {
    max-width: 35px;
    max-height: 35px;
    object-fit: contain;
  }

  /* Light theme adjustments */
  [data-theme="light"] .logo-container {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  }

  [data-theme="light"] .logo-container:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  }
</style>